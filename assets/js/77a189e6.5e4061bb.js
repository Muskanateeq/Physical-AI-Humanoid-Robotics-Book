"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics=globalThis.webpackChunkphysical_ai_humanoid_robotics||[]).push([[779],{7293:(e,n,i)=>{i.d(n,{A:()=>N});var t=i(6540),s=i(4848);function o(e){const{mdxAdmonitionTitle:n,rest:i}=function(e){const n=t.Children.toArray(e),i=n.find(e=>t.isValidElement(e)&&"mdxAdmonitionTitle"===e.type),o=n.filter(e=>e!==i),r=i?.props.children;return{mdxAdmonitionTitle:r,rest:o.length>0?(0,s.jsx)(s.Fragment,{children:o}):null}}(e.children),o=e.title??n;return{...e,...o&&{title:o},children:i}}var r=i(4164),l=i(1312),a=i(7559);const c="admonition_xJq3",d="admonitionHeading_Gvgb",h="admonitionIcon_Rf37",u="admonitionContent_BuS1";function m({type:e,className:n,children:i}){return(0,s.jsx)("div",{className:(0,r.A)(a.G.common.admonition,a.G.common.admonitionType(e),c,n),children:i})}function p({icon:e,title:n}){return(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:h,children:e}),n]})}function x({children:e}){return e?(0,s.jsx)("div",{className:u,children:e}):null}function g(e){const{type:n,icon:i,title:t,children:o,className:r}=e;return(0,s.jsxs)(m,{type:n,className:r,children:[t||i?(0,s.jsx)(p,{title:t,icon:i}):null,(0,s.jsx)(x,{children:o})]})}function f(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const j={icon:(0,s.jsx)(f,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function y(e){return(0,s.jsx)(g,{...j,...e,className:(0,r.A)("alert alert--secondary",e.className),children:e.children})}function b(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const v={icon:(0,s.jsx)(b,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function w(e){return(0,s.jsx)(g,{...v,...e,className:(0,r.A)("alert alert--success",e.className),children:e.children})}function z(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const _={icon:(0,s.jsx)(z,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function T(e){return(0,s.jsx)(g,{..._,...e,className:(0,r.A)("alert alert--info",e.className),children:e.children})}function A(e){return(0,s.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const k={icon:(0,s.jsx)(A,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function D(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const F={icon:(0,s.jsx)(D,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const R={icon:(0,s.jsx)(A,{}),title:(0,s.jsx)(l.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const C={...{note:y,tip:w,info:T,warning:function(e){return(0,s.jsx)(g,{...k,...e,className:(0,r.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,s.jsx)(g,{...F,...e,className:(0,r.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,s.jsx)(y,{title:"secondary",...e}),important:e=>(0,s.jsx)(T,{title:"important",...e}),success:e=>(0,s.jsx)(w,{title:"success",...e}),caution:function(e){return(0,s.jsx)(g,{...R,...e,className:(0,r.A)("alert alert--warning",e.className),children:e.children})}}};function N(e){const n=o(e),i=(t=n.type,C[t]||(console.warn(`No admonition component found for admonition type "${t}". Using Info as fallback.`),C.info));var t;return(0,s.jsx)(i,{...n})}},8001:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-2-simulation/gazebo-physics","title":"Chapter 4: The Physics Engine & Gazebo","description":"The Digital Twin: A Tale of Two Formats","source":"@site/docs/module-2-simulation/1-gazebo-physics.md","sourceDirName":"module-2-simulation","slug":"/module-2-simulation/gazebo-physics","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-simulation/gazebo-physics","draft":false,"unlisted":false,"editUrl":"https://github.com/Muskanateeq/Physical-AI-Humanoid-Robotics-Book/tree/main/docs/module-2-simulation/1-gazebo-physics.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"gazebo-physics","title":"Chapter 4: The Physics Engine & Gazebo"},"sidebar":"tutorialSidebar","previous":{"title":"Module 2: The Digital Twin (Gazebo & Unity)","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/category/module-2-the-digital-twin-gazebo--unity"},"next":{"title":"Chapter 5: Photorealism and Interaction in Unity","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-2-simulation/unity-rendering"}}');var s=i(4848),o=i(8453),r=i(7293);const l={id:"gazebo-physics",title:"Chapter 4: The Physics Engine & Gazebo"},a=void 0,c={},d=[{value:"The Digital Twin: A Tale of Two Formats",id:"the-digital-twin-a-tale-of-two-formats",level:2},{value:"The URDF-SDF Dichotomy",id:"the-urdf-sdf-dichotomy",level:3},{value:"Inside the Physics Engine: Open Dynamics Engine (ODE)",id:"inside-the-physics-engine-open-dynamics-engine-ode",level:2},{value:"The World Update Loop",id:"the-world-update-loop",level:3},{value:"Inertial Modeling: Giving Your Robot Mass",id:"inertial-modeling-giving-your-robot-mass",level:2},{value:"Launching the Simulation",id:"launching-the-simulation",level:2}];function h(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"the-digital-twin-a-tale-of-two-formats",children:"The Digital Twin: A Tale of Two Formats"}),"\n",(0,s.jsxs)(n.p,{children:["In Module 1, we used the ",(0,s.jsx)(n.strong,{children:"Unified Robot Description Format (URDF)"})," to describe our robot's kinematics and visual appearance. While URDF is excellent for visualization in tools like RViz, it falls short for high-fidelity simulation. For this, we need the ",(0,s.jsx)(n.strong,{children:"Simulation Description Format (SDF)"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"the-urdf-sdf-dichotomy",children:"The URDF-SDF Dichotomy"}),"\n",(0,s.jsxs)(n.p,{children:["Think of URDF as the robot's blueprint, defining its parts and how they connect. SDF, on the other hand, is the blueprint for an entire ",(0,s.jsx)(n.em,{children:"world"}),", including the robot, lighting, environmental objects, and most importantly, the physics properties required for realistic simulation."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Feature"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"URDF"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"SDF"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Primary Use"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Kinematic Description, Visualization (RViz)"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Full Simulation Environment (Gazebo)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"File Type"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"XML"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"XML"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Can Describe"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"A single robot's structure"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Entire worlds, multiple robots, lights, physics"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Physics Props"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Limited (mass, basic inertia)"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Rich (friction, damping, contact stiffness)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Looping"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"No (strict tree structure)"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Yes (allows for parallel manipulators)"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["To use our URDF-based robot in Gazebo, we don't throw it away. Instead, we ",(0,s.jsx)(n.em,{children:"extend"})," it with Gazebo-specific SDF tags within a ",(0,s.jsx)(n.code,{children:"<gazebo>"})," block."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="urdf_extension_example.urdf"',children:'<link name="left_foot">\r\n  \x3c!-- ... existing link properties ... --\x3e\r\n</link>\r\n\r\n\x3c!-- Gazebo-specific extensions for the \'left_foot\' link --\x3e\r\n<gazebo reference="left_foot">\r\n  <mu1>0.9</mu1>  \x3c!-- Primary friction coefficient --\x3e\r\n  <mu2>0.9</mu2>  \x3c!-- Secondary friction coefficient --\x3e\r\n  <kp>1000000.0</kp> \x3c!-- Contact stiffness --\x3e\r\n  <kd>100.0</kd>     \x3c!-- Contact damping --\x3e\r\n  <material>Gazebo/Grey</material>\r\n</gazebo>\n'})}),"\n",(0,s.jsx)(r.A,{type:"tip",title:"Personalization Tip",children:(0,s.jsxs)(n.p,{children:["When you simulate your own robot, you will add ",(0,s.jsx)(n.code,{children:"<gazebo>"})," tags to your custom URDF file to define its physical properties for interaction with the simulated world."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"inside-the-physics-engine-open-dynamics-engine-ode",children:"Inside the Physics Engine: Open Dynamics Engine (ODE)"}),"\n",(0,s.jsxs)(n.p,{children:["Gazebo uses a physics engine to calculate the motion of objects. The default and most common engine is the ",(0,s.jsx)(n.strong,{children:"Open Dynamics Engine (ODE)"}),". Understanding its core components is crucial for debugging your simulation and achieving stable, realistic behavior."]}),"\n",(0,s.jsx)(n.h3,{id:"the-world-update-loop",children:"The World Update Loop"}),"\n",(0,s.jsx)(n.p,{children:"The simulation progresses in discrete time steps. Here\u2019s a simplified view of what happens in each step:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:'graph TD\r\n    A[Start of Time Step] --\x3e B{Apply Forces};\r\n    B --\x3e C{Collision Detection};\r\n    C --\x3e D{Solve Constraints};\r\n    D --\x3e E{Integrate State};\r\n    E --\x3e F[End of Time Step];\r\n\r\n    subgraph "Forces"\r\n        B;\r\n    end\r\n    subgraph "Contact Physics"\r\n        C;\r\n        D;\r\n    end\r\n    subgraph "Motion"\r\n        E;\r\n    end\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Parameters & Their Impact:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"update_rate"})}),": The number of simulation updates per second (Hz). A higher rate means higher fidelity but requires more CPU power."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"max_step_size"})}),": The duration of a single time step in seconds (e.g., 0.001 for 1ms). This is the most critical parameter for stability. ",(0,s.jsx)(n.code,{children:"update_rate * max_step_size"})," should equal your desired ",(0,s.jsx)(n.strong,{children:"Real Time Factor (RTF)"}),", which is ideally ",(0,s.jsx)(n.code,{children:"1.0"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"iters"})," (Solver Iterations)"]}),": The number of times the constraint solver (SOR-LCP) runs per time step. More iterations lead to more accurate contact physics but are computationally expensive."]}),"\n"]}),"\n",(0,s.jsx)(r.A,{type:"warning",title:"Simulation Instability!",children:(0,s.jsxs)(n.p,{children:['If your robot model "explodes" or jitters uncontrollably upon loading, the first thing to check is your physics parameters and inertial tensors. A common cause is a ',(0,s.jsx)(n.code,{children:"max_step_size"})," that is too large for the complexity of the model, or inaccurate inertia values."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"inertial-modeling-giving-your-robot-mass",children:"Inertial Modeling: Giving Your Robot Mass"}),"\n",(0,s.jsxs)(n.p,{children:["Perhaps the most overlooked aspect of a URDF is the ",(0,s.jsx)(n.code,{children:"<inertial>"})," tag. For a simulation to be stable, every link with mass must have a physically plausible ",(0,s.jsx)(n.strong,{children:"inertial tensor"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<inertial>\r\n  <mass value="1.5" />\r\n  <origin xyz="0 0 0.1" rpy="0 0 0" />\r\n  <inertia ixx="0.01" ixy="0.0" ixz="0.0"\r\n           iyy="0.01" iyz="0.0"\r\n           izz="0.01" />\r\n</inertial>\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<mass>"})}),": The mass of the link in kilograms."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<origin>"})}),": The center of mass (CoM) of the link, relative to the link's own origin."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<inertia>"})}),": The 3x3 inertia tensor matrix. For simple, symmetrical shapes, you only need ",(0,s.jsx)(n.code,{children:"ixx"}),", ",(0,s.jsx)(n.code,{children:"iyy"}),", and ",(0,s.jsx)(n.code,{children:"izz"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"While you can approximate these for simple shapes, using CAD software (like Fusion 360, SolidWorks) to automatically calculate the mass, CoM, and inertia tensor for your links is the professional workflow."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"launching-the-simulation",children:"Launching the Simulation"}),"\n",(0,s.jsxs)(n.p,{children:["We use a ROS 2 launch file to orchestrate starting the Gazebo server, spawning the robot, and running any necessary nodes like ",(0,s.jsx)(n.code,{children:"robot_state_publisher"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="launch/start_simulation.launch.py"',children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\n\r\ndef generate_launch_description():\r\n    pkg_gazebo_ros = get_package_share_directory('gazebo_ros')\r\n    \r\n    # Path to your custom robot description package\r\n    pkg_robot_description = get_package_share_directory('my_robot_description')\r\n\r\n    # Start Gazebo with a specific world file\r\n    gazebo = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(pkg_gazebo_ros, 'launch', 'gazebo.launch.py'),\r\n        ),\r\n        launch_arguments={'world': os.path.join(pkg_robot_description, 'worlds', 'my_world.world')}.items()\r\n    )\r\n\r\n    # Spawn your robot from a URDF file\r\n    spawn_entity = Node(package='gazebo_ros', executable='spawn_entity.py',\r\n                        arguments=['-topic', 'robot_description',\r\n                                   '-entity', 'my_humanoid'],\r\n                        output='screen')\r\n\r\n    return LaunchDescription([\r\n        gazebo,\r\n        spawn_entity,\r\n        # ... add other nodes like robot_state_publisher here\r\n    ])\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);